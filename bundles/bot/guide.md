Tracegate Guide (актуальный)

Ниже быстрый и правильный порядок работы с ботом.

Обход Вайтлиста (B2)
1. Это отдельный профиль `B2 - VLESS Chain (через VPS-E)`.
2. Используй его, если обычный `B1` работает нестабильно или нужен обход вайтлиста/маршрутизации через цепочку.
3. `B2` создается отдельно от `B1` и не заменяет уже существующие подключения.

Как создать B2 (пошагово)
1. Нажми `/start`.
2. Открой `Устройства`.
3. Выбери нужное устройство (или сначала создай новое через `Добавить устройство`).
4. В карточке устройства нажми `B2 - VLESS Chain (через VPS-E)`.
5. Бот предложит выбрать провайдера (например `МТС`, `Мегафон`, `T2`, `Yota`, `Все`).
6. Выбери своего провайдера (или `Все`, если не знаешь какой лучше).
7. Бот покажет список SNI (или страницу SNI) для выбранного провайдера.
8. Выбери любой подходящий SNI из списка.
9. Дождись создания подключения и ревизии.
10. Открой `Ревизии ...` у созданного B2-подключения.
11. Нажми `Текущий URL/конфиг`.
12. Импортируй выданный URL/QR в клиент и включи профиль.

Если B2 не завелся с первого раза
1. Выпусти новую ревизию (`Новая ревизия (SNI)`), выбери другой SNI.
2. Импортируй новый конфиг заново (старый профиль в клиенте лучше удалить).
3. Проверь, что в клиенте включен именно B2-профиль, а не старый B1.

Главное правило
1. Одно физическое устройство = одно устройство в боте = свой отдельный конфиг.
2. Не используй один и тот же WireGuard-конфиг на нескольких устройствах одновременно.
3. Если нужен второй телефон/ПК/ноутбук - создай отдельное устройство и отдельное подключение.

Шаг 1. Создай устройство
1. Нажми `/start`.
2. Открой `Устройства`.
3. Нажми `Добавить устройство`.
4. Введи понятное имя: `iPhone`, `MacBook`, `Windows-PC`, `Android`.

Шаг 2. Создай подключение (профиль B1-B5)
1. Открой нужное устройство.
2. Выбери профиль:
   `B1 - VLESS Direct` (обычно основной вариант)
   `B2 - VLESS Chain (через VPS-E)` (цепочка через второй сервер)
   `B3 - Hysteria2 (UDP/QUIC)` (быстрый UDP-вариант)
   `B4 - Hysteria2 Chain (backup)` (резервный chain)
   `B5 - WireGuard`
3. Для `B1` бот попросит выбрать транспорт:
   `Reality (выбор SNI)` или `TLS (WS)`.
4. Для VLESS с Reality/Chain бот может предложить выбрать провайдера и SNI.

Шаг 3. Получи текущий конфиг / URL
1. В карточке устройства открой `Ревизии ...` у нужного подключения.
2. Нажми `Текущий URL/конфиг`.
3. Импортируй выданный URL/файл/QR в клиент.

Что такое ревизии
1. Ревизия = новая версия конфига для того же подключения.
2. Для VLESS можно выпустить `Новая ревизия (SNI)` и выбрать другой SNI.
3. Если старый конфиг не работает - проще выпустить новую ревизию и импортировать ее заново.

Импорт в клиент
1. VLESS/Hysteria2: обычно `Import from clipboard` или `Import from QR`.
2. WireGuard: импортируй `.conf`/QR в WireGuard-клиент.
3. После перевыдачи конфига лучше удалить старый профиль в клиенте и импортировать новый.

Важно по WireGuard
1. Один WG-конфиг не рассчитан на несколько устройств одновременно (endpoint будет "перетягиваться").
2. Симптом: на Mac работает, на Windows с тем же конфигом не работает или работает нестабильно.
3. Решение: отдельный WG-конфиг на каждое устройство.
4. Для Windows при handshake без трафика попробуй `MTU = 1380` (или `1280`).

Если не работает
1. Проверь, что открыто правильное устройство и правильный профиль (`B1/B2/B3/B4/B5`).
2. Открой `Ревизии` -> `Текущий URL/конфиг` и импортируй заново.
3. Для VLESS Reality попробуй новую ревизию с другим SNI.
4. Полностью выключи такой же конфиг на другом устройстве (особенно для WireGuard).
5. Начни заново через `/start`.

Полезные команды
- `/start` - главное меню
- `/guide` - показать этот гайд
- `/clean` - попытка удалить последние сообщения бота в чате
- `/cancel` - отменить текущий ввод (если бот ждет текст)

Репозиторий проекта
https://github.com/MyHeartRaces/Tracegate
