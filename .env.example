APP_ENV=dev
LOG_LEVEL=INFO

# Bootstrap superadmin Telegram IDs (JSON list).
SUPERADMIN_TELEGRAM_IDS=[255761416]

# Local dev (docker compose) uses these by default.
POSTGRES_DB=tracegate
POSTGRES_USER=tracegate
POSTGRES_PASSWORD=REPLACE_ME

# For docker compose use host `postgres`; for local host use `localhost`.
DATABASE_URL=postgresql+asyncpg://tracegate:REPLACE_ME@postgres:5432/tracegate

API_HOST=0.0.0.0
API_PORT=8080
API_INTERNAL_TOKEN=REPLACE_ME

# Public URL of the control-plane (used by bot links, e.g. Grafana OTP login).
PUBLIC_BASE_URL=http://localhost:8080

# Bundles root (container image includes ./bundles by default).
BUNDLE_ROOT=bundles

DISPATCHER_HOST=0.0.0.0
DISPATCHER_PORT=8090
DISPATCHER_POLL_SECONDS=3
DISPATCHER_BATCH_SIZE=50
DISPATCHER_LOCK_TTL_SECONDS=60
DISPATCHER_MAX_ATTEMPTS=25
DISPATCHER_CONCURRENCY=10
DISPATCHER_METRICS_ENABLED=true
DISPATCHER_METRICS_HOST=0.0.0.0
DISPATCHER_METRICS_PORT=9091
DISPATCHER_CLIENT_CERT=
DISPATCHER_CLIENT_KEY=
DISPATCHER_CA_CERT=

AGENT_HOST=0.0.0.0
AGENT_PORT=8070
AGENT_ROLE=VPS_T
AGENT_AUTH_TOKEN=REPLACE_ME
AGENT_DATA_ROOT=/tmp/tracegate-agent
AGENT_STATS_URL=http://127.0.0.1:9999/traffic
AGENT_STATS_SECRET=REPLACE_ME
AGENT_WG_INTERFACE=wg0
AGENT_WG_EXPECTED_PORT=51820
AGENT_DRY_RUN=true
AGENT_RUNTIME_MODE=kubernetes
# Graceful Xray hot-reload (no hard restarts), serialized with flock.
AGENT_RELOAD_XRAY_CMD=sh -lc '(flock 9; sleep 1; pkill -HUP xray || true) 9>/tmp/xray-reload.lock'
AGENT_RELOAD_HYSTERIA_CMD=pkill -HUP hysteria || true
AGENT_RELOAD_WG_CMD=wg-quick strip /etc/wireguard/wg0.conf | wg syncconf wg0 /dev/fd/0 || true
AGENT_SERVER_CERT=
AGENT_SERVER_KEY=
AGENT_CA_CERT=

BOT_TOKEN=
BOT_API_BASE_URL=http://localhost:8080
BOT_API_TOKEN=REPLACE_ME

DEFAULT_VPS_T_HOST=vps-t.example.com
DEFAULT_VPS_E_HOST=vps-e.example.com

# Client config material (v0.1)
REALITY_PUBLIC_KEY=
REALITY_SHORT_ID=
WIREGUARD_SERVER_PUBLIC_KEY=

# VLESS WS+TLS (optional)
VLESS_WS_PATH=/ws
VLESS_WS_TLS_PORT=443

# Grafana integration (optional, typically enabled in k3s Helm chart).
GRAFANA_ENABLED=false
GRAFANA_INTERNAL_URL=http://localhost:3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=
GRAFANA_COOKIE_SECRET=
GRAFANA_OTP_TTL_SECONDS=300
GRAFANA_SESSION_TTL_SECONDS=3600
